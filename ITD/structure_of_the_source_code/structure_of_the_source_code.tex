\providecommand{\itd}{..}
\documentclass[../ITD.tex]{subfiles}

\begin{document}
    \chapter{Structure of the source code}\label{ch:structure-of-the-source-code}
    The following section' aim is to explain the structure of the Flutter project managing the SafeStreet operations. This section only explains the content of every file so does not deep into details; for more information, please look at the source code.This section will cover only the content lib folder, as the android and ios folder contain platform specific files, automatically generated by theFlutter project creator.
    In this folder there are two files:
    \begin{itemize}
        \item \textbf{auth\_manager.dart}: this manager is used to redirect the user, to the right page when it opens the application.
        \item \textbf{main.dart}: the main entry point of the app; it loads the first screen shown to the user.
    \end{itemize}
    There are also three subfolder which are described in the following sections.
    \section{Model}\label{sec:model}
    This is the model component of the MVVM pattern chosen for this project.
    Model refers either to a domain model, which represents real state content, or to the data access layer, which represents content.
    In this folder there are three subfolder.
    \subsection{Enum}\label{subsec:enum}
    \begin{itemize}
        \item \textbf{level.dart}: different level of visibility.
        \item \textbf{violation.dart}: different type of the violations, more can be included here.
    \end{itemize}
    There is also present another file \textbf{location.dart} which manages the position that is used by different classes of SafeStreets.
    \subsection{Report}\label{subsec:report}
    It contains the different representations of a report and its components.
    \begin{itemize}
        \item \textbf{report.dart}:this is the abstract class of a report in SafeStreets.
        \item \textbf{report\_to\_get.dart}: this class is used to create report objects that are fetched as map from firebase.
        \item \textbf{report\_to\_send.dart}: this class is used to create report object to send to firebase.
        \item \textbf{violation\_image.dart}: this is the image object created by a user when he takes a photo.
    \end{itemize}
    \subsection{User}\label{subsec:user}
    It contains the different type of users of the app.
    \begin{itemize}
        \item \textbf{user.dart}: this is the abstract class of a user in SafeStreets.
        \item \textbf{authority.dart}: this is one type of user.
        \item \textbf{citizen.dart}: this is another type of user.
    \end{itemize}
    \section{View model}\label{sec:view-model}
    The view model is an abstraction of the view exposing public properties and commands.
    In this folder there are all the managers already presented in the design document (sec 2.2).
    \begin{itemize}
        \item \textbf{access\_manager.dart}: it manages the sign up and login of the users.
        \item \textbf{firebase\_storage\_services.dart}: it manages the uploading of pictures on firebase' storage.
        \item \textbf{new\_report\_manager.dart}: it manages the insertion of a new report.
        \item \textbf{report\_map\_manager.dart}:it takes care of showing on the map all the reports with the correct color of the marker.
        \item \textbf{stats\_manager.dart}: it takes care of building statistics on the app through specific algorithms.
        \item \textbf{user\_report\_visualization\_manager.dart}: it manages the visualization of all reports of one user.
        \item \textbf{utilities.dart}: in this class there are methods used as helpers.
        \item \textbf{violation\_query\_manager.dart}: it manages all the procedures to make a query on the database to retrieve same specific data.
    \end{itemize}
    \section{View}\label{sec:view}
    It displays a representation of the model and receives the user's interaction with the view (clicks, keyboard, gestures, etc.), and it forwards the handling of these to the view model.
    \begin{itemize}
        \item \textbf{create\_report\_page.dart}: this is the creation page of a report.
        \item \textbf{home\_page.dart}: this is the home page of the application, from here we can navigate to the other sections of the app, like statistics, query page, my reports and logout.
        \item \textbf{my\_reports\_page.dart}: here is the list page of all the reports submitted by the logged user.
        \item \textbf{sign\_in\_page.dart}: the login in page.
        \item \textbf{sign\_up\_page.dart}: the sign up page.
        \item \textbf{statistics\_citizen\_page.dart}: this is the statistics page that displays different type of statistics without sensitive information.
        \item \textbf{statistics\_authority\_page.dart}: this is the statistics page that displays different type of statistics including sensitive information.
        \item \textbf{view\_report\_authority\_page.dart}: this is the authority view of a report.
        \item \textbf{view\_report\_citizen\_page.dart}: this is the citizen view of a report.
        \item \textbf{violation\_query\_page.dart}: this page displays different filters to set a query.
    \end{itemize}

\end{document}